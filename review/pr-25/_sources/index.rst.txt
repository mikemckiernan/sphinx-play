.. sphinx-play documentation master file, created by
   sphinx-quickstart on Tue Mar  1 16:25:36 2022.
   You can adapt this file completely to your liking, but it should at least
   contain the root `toctree` directive.

Welcome to sphinx-play's documentation!
=======================================

.. toctree::
   :maxdepth: 2
   :caption: Contents:

GitHub workflows for documentation
----------------------------------

The goal is to add some automation to GitHub projects for documentation.

- [ ] When I open a PR, build the documentation, add it to GitHub Pages, and update the PR with a comment that includes a review URL.

- [ ] When I push updates to a PR, rebuild the documentation.

- [ ] When I close a PR, remove the review HTML from GitHub Pages.

TODO:

- [ ] When I merge a PR, rebuild the documentation (or copy?), and move it into the ``main`` directory for GitHub Pages.


Some things I learned
---------------------

I cannot explain why, but the `synchronize` state for a `pull_request` is reported
in the GitHub UI, but it is not reported in the events that can be downloaded with `curl`:

.. code-block:: shell

   curl -H "Accept: application/vnd.github.v3+json" https://api.github.com/repos/mikemckiernan/sphinx-play/events

Pushes to a branch that has an open PR seem to run the actions again.
In the case of this workflow, the HTML is build again and deployed.

Regarding the comment with the URL to the proposed changes, I had a boo-boo
in my logic:

.. code-block:: yaml

   if: github.event.pull_request.action == 'opened'

Silly me.  The `action` field is not a child of the `pull_request`.
It is a child of `github.event`.


Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
